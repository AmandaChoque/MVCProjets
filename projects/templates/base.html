{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Django CRUD Application</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <style>
      .sidebar {
        height: 100vh;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #343a40;
        padding-top: 20px;
        transition: all 0.3s ease-in-out;
        overflow-y: auto;
      }
      .sidebar a {
        color: #ffffff !important;
        text-decoration: none;
        padding: 10px;
        display: block;
      }
      .sidebar a:hover {
        background-color: #2f7799;
      }
      .sidebar img {
        display: block;
        margin: 10px auto;
        width: 80%;
        border-radius: 8px;
      }
      .sidebar-hidden {
        transform: translateX(-100%);
      }
      @media (max-width: 768px) {
        .container {
          margin-left: 0 !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#sidebar"
          aria-controls="sidebar"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">SOBOTEC S.R.L.</a>
      </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar bg-dark collapse show" id="sidebar">
      <h4 class="text-center text-white">SOBOTEC S.R.L.</h4>
      <img src="/static/common/logo.png" alt="Logo de la empresa">
      
      <ul class="nav flex-column">
        {% if user.is_authenticated %}
        <p class="text-white"> Bienvenid@ ... {{ user.username }} !</p>
        <li class="nav-item">
          <a class="nav-link" href="/">Inicio</a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#projectSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="projectSubmenu"
          >
            Proyectos
          </a>
          <div class="collapse" id="projectSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'projects' %}">Pendientes</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'projects_completed' %}"
                  >Completadas</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_project' %}"
                  >Crear Proyectos</a>
              </li>

              <li>
              <a href="{% url 'project_report' %}" class="nav-link">Generar Reporte</a>
              </li> 
              <li>
                <a href="{% url 'project_analysis' %}" class="nav-link">Ver Análisis</a>
              </li>

            </ul>
          </div>
        </li>


        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#employeeSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="employeeSubmenu"
          >
          Empleados
          </a>
          <div class="collapse" id="employeeSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'employees' %}">Listar Empleados</a>
              </li>
             
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_employee' %}"
                  >Crear Empleados</a>
              </li>
             
            </ul>
          </div>
        </li>

        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#contractorSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="contractorSubmenu"
          >
          Contratista
          </a>
          <div class="collapse" id="contractorSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'contractors' %}">Listar Contratista</a>
              </li>     
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_contractor' %}">Crear Contratista</a>
              </li>        
            </ul>
          </div>
        </li>


        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#public_entitieSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="public_entitieSubmenu"
          >
          Entidad Pública
          </a>
          <div class="collapse" id="public_entitieSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'public_entities' %}">Listar Entidad Pública</a>
              </li>         
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_public_entity' %}">Crear Entidad Pública</a>
              </li>   
            </ul>
          </div>
        </li>

        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#proposalSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="proposalSubmenu"
          >
          Propuesta
          </a>
          <div class="collapse" id="proposalSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'proposals' %}">Listar Propuesta</a>
              </li>      
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_proposal' %}">Crear Propuesta</a>
              </li>      
            </ul>
          </div>
        </li>


        <li class="nav-item">
          <a
            class="nav-link"
            data-bs-toggle="collapse"
            href="#paymentSubmenu"
            role="button"
            aria-expanded="false"
            aria-controls="paymentSubmenu"
          >
          Pagos
          </a>
          <div class="collapse" id="paymentSubmenu">
            <ul class="nav flex-column ms-3">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'payments' %}">Listar Pagos</a>
              </li>
             
              <li class="nav-item">
                <a class="nav-link" href="{% url 'create_payment' %}"
                  >Crear Pagos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'filter_payments_by_project_name' %}"
                  >Generar Reporte Pagos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'payment_analysis' %}"
                  >Ver Análisis</a>
              </li>
              
             
            </ul>
          </div>
        </li>

        
        <!-- Repeat similar structures for Empleados, Contratistas, etc. -->
        <li class="nav-item">
          <a class="nav-link" href="{% url 'signout' %}">Salir</a>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="/">Inicio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'signin' %}">Iniciar Sesión</a>
        </li>
        {% endif %}
      </ul>
    </div>

    <!-- Main Content -->
    <div class="container" style="margin-left: 260px; transition: margin-left 0.3s ease-in-out;">
      {% block content %} {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const sidebar = document.querySelector('.sidebar');
      const content = document.querySelector('.container');

      document.querySelector('.navbar-toggler').addEventListener('click', () => {
        sidebar.classList.toggle('sidebar-hidden');
        content.style.marginLeft = sidebar.classList.contains('sidebar-hidden') ? '0' : '260px';
      });
    </script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> -->
  </body>
</html>

